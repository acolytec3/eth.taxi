<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.392fc44941650fcd7a74.css" id="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#c5c8c6;text-shadow:0 1px rgba(0,0,0,.3);font-family:Inconsolata,Monaco,Consolas,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1d1f21}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7c7c7c}.token.punctuation{color:#c5c8c6}.namespace{opacity:.7}.token.keyword,.token.property,.token.tag{color:#96cbfe}.token.class-name{color:#ffffb6;text-decoration:underline}.token.boolean,.token.constant{color:#9c9}.token.deleted,.token.symbol{color:#f92672}.token.number{color:#ff73fd}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a8ff60}.token.variable{color:#c6c5fe}.token.operator{color:#ededed}.token.entity{color:#ffffb6;cursor:help}.token.url{color:#96cbfe}.language-css .token.string,.style .token.string{color:#87c38a}.token.atrule,.token.attr-value{color:#f9ee98}.token.function{color:#dad085}.token.regex{color:#e9c062}.token.important{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:200;src:local("Nunito Extra Light "),local("Nunito-Extra Light"),url(/static/nunito-latin-200-2dbeb8d854e77c952cb636cb14a151c4.woff2) format("woff2"),url(/static/nunito-latin-200-e53a21a8bf1b97fb9900e8d5c5bfbc14.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:200;src:local("Nunito Extra Light italic"),local("Nunito-Extra Lightitalic"),url(/static/nunito-latin-200italic-bbdf1c37c56e1bfaf618b9a4ee46d508.woff2) format("woff2"),url(/static/nunito-latin-200italic-2bcb70df023a72cb0a5864c993d03bfc.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:300;src:local("Nunito Light "),local("Nunito-Light"),url(/static/nunito-latin-300-98aabf9aea1a55e2390109ad1efddce3.woff2) format("woff2"),url(/static/nunito-latin-300-97e0d2fc0422400a6e7be8f1b5e4949e.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:300;src:local("Nunito Light italic"),local("Nunito-Lightitalic"),url(/static/nunito-latin-300italic-ac71e7f9cd408dd512f6a6bbbd64eb51.woff2) format("woff2"),url(/static/nunito-latin-300italic-8646bd832f738c016b56b146af6fcd46.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:400;src:local("Nunito Regular "),local("Nunito-Regular"),url(/static/nunito-latin-400-508e414e3d3bc41666826fee46c7d881.woff2) format("woff2"),url(/static/nunito-latin-400-e5875b853d135f2a82ceae7ac537b6f4.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:400;src:local("Nunito Regular italic"),local("Nunito-Regularitalic"),url(/static/nunito-latin-400italic-28f555d9a5c83842f03988ed14f00ef5.woff2) format("woff2"),url(/static/nunito-latin-400italic-09ce3100c075ee04f293b9191c88f156.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:600;src:local("Nunito SemiBold "),local("Nunito-SemiBold"),url(/static/nunito-latin-600-8b8871e482a76d7e9327b02131564af7.woff2) format("woff2"),url(/static/nunito-latin-600-f894e279899f0cda9d06e32b78783399.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:600;src:local("Nunito SemiBold italic"),local("Nunito-SemiBolditalic"),url(/static/nunito-latin-600italic-9f930640316b0b9e8b088958d8f7aa5c.woff2) format("woff2"),url(/static/nunito-latin-600italic-9d150271cf30aefb8609dff4c9ece978.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:700;src:local("Nunito Bold "),local("Nunito-Bold"),url(/static/nunito-latin-700-a22acb48f45d03d672bf5b9389363a83.woff2) format("woff2"),url(/static/nunito-latin-700-7d90308f9bdf7321be5e28d017a5ade5.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:700;src:local("Nunito Bold italic"),local("Nunito-Bolditalic"),url(/static/nunito-latin-700italic-4507a1361620a66827e217855c9fff24.woff2) format("woff2"),url(/static/nunito-latin-700italic-26556875512fee1b823bc6117c076358.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:800;src:local("Nunito ExtraBold "),local("Nunito-ExtraBold"),url(/static/nunito-latin-800-eaa946756e91563b4b7d766de2f5b7ed.woff2) format("woff2"),url(/static/nunito-latin-800-5fa815a069b40c78f26863eaabcd6d2f.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:800;src:local("Nunito ExtraBold italic"),local("Nunito-ExtraBolditalic"),url(/static/nunito-latin-800italic-b9cd56a25c86d089cc18bc92dbad167a.woff2) format("woff2"),url(/static/nunito-latin-800italic-2e1a4979ec23066532d157ab5fe4ccc5.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:900;src:local("Nunito Black "),local("Nunito-Black"),url(/static/nunito-latin-900-f82c6fb49774f4e4caa570640e164320.woff2) format("woff2"),url(/static/nunito-latin-900-19de37363cebfe020de6d4abdbb38c2e.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:900;src:local("Nunito Black italic"),local("Nunito-Blackitalic"),url(/static/nunito-latin-900italic-6f10930c04eec040ac4ffb4890191149.woff2) format("woff2"),url(/static/nunito-latin-900italic-ca56cb53793f0f9084f26315012cefd8.woff) format("woff")}code{background-color:rgba(0,0,0,.04)}body{margin:0;font-family:Nunito,Avenir,Helvetica,"sans-serif";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{font-style:normal;color:rgba(0,0,0,.8);-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.8rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.8rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}a::selection,h1::selection,h2::selection,h3::selection,h4::selection,h5::selection,h6::selection,p::selection{background:rgba(255,250,150,.8)}.gatsby-highlight{background-color:#1d1f21;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-].line-numbers{padding:0 0 0 2.8em;overflow:initial}@media only screen and (max-width:480px){html{font-size:100%}}</style><meta name="generator" content="Gatsby 2.28.2"/><title data-react-helmet="true">Subspace - Observing DeFi | eth.taxi</title><meta data-react-helmet="true" name="description" content="unsplash-logoDerek Thomson Originally posted here Ever wanted to be part of the DeFi revolution but don&#x27;t know where to start?  Ever wanted to incorporate event…"/><meta data-react-helmet="true" property="og:title" content="Subspace - Observing DeFi"/><meta data-react-helmet="true" property="og:description" content="unsplash-logoDerek Thomson Originally posted here Ever wanted to be part of the DeFi revolution but don&#x27;t know where to start?  Ever wanted to incorporate event…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="acolytec3"/><meta data-react-helmet="true" name="twitter:title" content="Subspace - Observing DeFi"/><meta data-react-helmet="true" name="twitter:description" content="unsplash-logoDerek Thomson Originally posted here Ever wanted to be part of the DeFi revolution but don&#x27;t know where to start?  Ever wanted to incorporate event…"/><link rel="icon" href="/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link as="script" rel="preload" href="/webpack-runtime-512b8481d810a449f5df.js"/><link as="script" rel="preload" href="/framework-8e528b732ab2eaadb7b7.js"/><link as="script" rel="preload" href="/app-52efec0485f1743b94f6.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/commons-4f8d84475a4b9ccab8ef.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-7797dd6cba906a010d90.js"/><link as="fetch" rel="preload" href="/page-data/blog/observing_defi/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3649515864.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1pyi7sa">.css-1pyi7sa{background:transparent;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}</style><header class="css-1pyi7sa e173xrzq4"><style data-emotion-css="k1grrt">.css-k1grrt{max-width:860px;padding:1rem 1.0875rem;font-size:1.2rem;}</style><div class="css-k1grrt e173xrzq0"><p><style data-emotion-css="1kljdew">.css-1kljdew{color:black;margin-left:15px;-webkit-text-decoration:none;text-decoration:none;display:inline-block;position:relative;margin-left:0;}.css-1kljdew::after{content:"";position:absolute;width:100%;-webkit-transform:scaleX(0);-ms-transform:scaleX(0);transform:scaleX(0);height:2px;bottom:0;left:0;background-color:rgba(0,0,0,0.8);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;-webkit-transition:-webkit-transform 0.4s cubic-bezier(0.86,0,0.07,1);-webkit-transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);}.css-1kljdew:hover::after{-webkit-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:bottom left;-ms-transform-origin:bottom left;transform-origin:bottom left;}</style><a class="css-1kljdew e173xrzq3" href="/">eth.taxi</a><style data-emotion-css="1wj6arw">.css-1wj6arw{color:black;margin-left:15px;-webkit-text-decoration:none;text-decoration:none;display:inline-block;position:relative;}.css-1wj6arw::after{content:"";position:absolute;width:100%;-webkit-transform:scaleX(0);-ms-transform:scaleX(0);transform:scaleX(0);height:2px;bottom:0;left:0;background-color:rgba(0,0,0,0.8);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;-webkit-transition:-webkit-transform 0.4s cubic-bezier(0.86,0,0.07,1);-webkit-transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);}.css-1wj6arw:hover::after{-webkit-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:bottom left;-ms-transform-origin:bottom left;transform-origin:bottom left;}</style><a class="css-1wj6arw e173xrzq1" href="/blog">Blog</a><a href="https://github.com/acolytec3/eth.taxi" class="css-1wj6arw e173xrzq2">GitHub</a></p></div></header><style data-emotion-css="1813l62">.css-1813l62{margin:0 auto;max-width:860px;padding:0 1.0875rem 1rem;padding-top:0;}</style><div class="css-1813l62 e1qde77f0"><main><style data-emotion-css="hu0znc">.css-hu0znc{margin:0 auto;max-width:860px;padding:1.45rem 1.0875rem;}</style><div class="css-hu0znc e2f4drx0"><style data-emotion-css="n1d11z">.css-n1d11z{display:inline;border-radius:1em 0 1em 0;background-image:linear-gradient( -100deg,rgba(255,250,150,0.15),rgba(255,250,150,0.8) 100%,rgba(255,250,150,0.25) );}</style><h1 class="css-n1d11z e2f4drx1">Subspace - Observing DeFi</h1><style data-emotion-css="wvcn4j">.css-wvcn4j{margin-top:10px;color:#606060;}</style><h3 class="css-wvcn4j e2f4drx2">20 March, 2020<!-- --> - <!-- -->9 min read</h3><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:66.5%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQT/xAAWAQEBAQAAAAAAAAAAAAAAAAADAgT/2gAMAwEAAhADEAAAAeN54meYpK//xAAYEAACAwAAAAAAAAAAAAAAAAAAAQIQMf/aAAgBAQABBQIeMRKv/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BiP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAAIDAQAAAAAAAAAAAAAAAAABEBFBIf/aAAgBAQABPyFO2NQbpkbI/9oADAMBAAIAAwAAABCrH//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8QVuCwf//EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAgEBPxC4r//EABkQAQEBAAMAAAAAAAAAAAAAAAEAESFBcf/aAAgBAQABPxAByIC0fMdfU4vTZdb/2Q==" alt="hero image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/e36834686222b6064c829e5c1328e814/f836f/starttrails.jpg 200w,
/static/e36834686222b6064c829e5c1328e814/2244e/starttrails.jpg 400w,
/static/e36834686222b6064c829e5c1328e814/14b42/starttrails.jpg 800w,
/static/e36834686222b6064c829e5c1328e814/47498/starttrails.jpg 1200w,
/static/e36834686222b6064c829e5c1328e814/0e329/starttrails.jpg 1600w,
/static/e36834686222b6064c829e5c1328e814/208d9/starttrails.jpg 6720w" sizes="(max-width: 800px) 100vw, 800px" /><img loading="lazy" sizes="(max-width: 800px) 100vw, 800px" srcset="/static/e36834686222b6064c829e5c1328e814/f836f/starttrails.jpg 200w,
/static/e36834686222b6064c829e5c1328e814/2244e/starttrails.jpg 400w,
/static/e36834686222b6064c829e5c1328e814/14b42/starttrails.jpg 800w,
/static/e36834686222b6064c829e5c1328e814/47498/starttrails.jpg 1200w,
/static/e36834686222b6064c829e5c1328e814/0e329/starttrails.jpg 1600w,
/static/e36834686222b6064c829e5c1328e814/208d9/starttrails.jpg 6720w" src="/static/e36834686222b6064c829e5c1328e814/14b42/starttrails.jpg" alt="hero image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><style data-emotion-css="157c1zx">.css-157c1zx a{-webkit-text-decoration:none;text-decoration:none;position:relative;background-image:linear-gradient( rgba(255,250,150,0.8),rgba(255,250,150,0.8) );background-repeat:no-repeat;background-size:100% 0.2em;background-position:0 88%;-webkit-transition:background-size 0.25s ease-in;transition:background-size 0.25s ease-in;}.css-157c1zx a:hover{background-size:100% 88%;}</style><div class="css-157c1zx e2f4drx3"><p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@derekthomson?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Derek Thomson"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewBox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"></path></svg></span><span style="display:inline-block;padding:2px 3px">Derek Thomson</span></a></p>
<p>Originally posted <a href="https://our.status.im/subspace-observing-defi/">here</a></p>
<p>Ever wanted to be part of the DeFi revolution but don't know where to start?  Ever wanted to incorporate event tracking into your Dapp but not eager to build out complicated event tracking logic in your backend? Well, my friend, now's your chance.  Subspace is calling.. </p>
<h2>What is Subspace?</h2>
<p>For those of you not familiar with <a href="https://subspace.embarklabs.io">Subspace</a>, it's a Javascript library from the Embark team for tracking smart contract state variables, events, address balances, etc on Ethereum.  It's built on top of <a href="https://rxjs-dev.firebaseapp.com/guide/observable">RxJS</a> observables and can be used to easily connect smart contract events or state changes into your Dapp with a few simple steps.</p>
<h2>What's an observable?</h2>
<p>Glad you asked.  According to the RxJS docs, "Observables are lazy Push collections of multiple values."  Okay...great, what can I do with a lazy push collection?  For our purposes, think of an observable as the stream of state changes an Ethereum smart contract public variable or the stream of events emitted by a smart contract. And, Subspace makes it easy to grab these events or state changes and connect them into a Dapp.  So, let's see what it looks like.</p>
<h2>What are we doing here?</h2>
<p>Before we dig into Subspace, let's sketch out an idea for a Dapp that uses smart contract events.  In this article, we're going to build a simple DeFi dashboard that shows you the last 5 DAI -> ETH trades on the Uniswap DAI contract and the average ETH/DAI price (i.e. how many DAI it costs to buy 1 ETH).</p>
<p>We're going to use <a href="https://reactjs.org/">React</a> as our framework. Love it or hate it, it is the most popular Javascript UI framework around today.</p>
<p>Since I will be the first to admit I'm not much of a UI/UX person, I've recently come across <a href="https://v2.grommet.io/">Grommet</a>, which is a component library built on top of React that is mobile-first, responsive, accessible, yadda yadda yadda.  Basically, it's great so we'll some of its components to make our Dapp look not completely terrible.</p>
<p>So, all that to say, don't hate.</p>
<h2>Build the Dapp already!</h2>
<p>Okay, let's get down to business. First, let's get the boring stuff out of the way:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">npx create-react-app subspace-demo
cd subspace-demo
yarn add rxjs web3 @embarklabs/subspace grommet grommet-icons styled-components</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>This will get all your dependencies installed.  Next, let's purge out the React boilerplate in the app and get Grommet set up.</p>
<p>Open up App.js and replace the imports with the following:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>useEffect<span class="token punctuation">,</span> useState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    Box<span class="token punctuation">,</span>
    Grommet<span class="token punctuation">,</span>
    DataTable<span class="token punctuation">,</span>
    Text
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'grommet'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> pipe <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Subspace<span class="token punctuation">,</span> <span class="token punctuation">{</span>$latest<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@embarklabs/subspace'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Web3 <span class="token keyword">from</span> <span class="token string">'web3'</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Next, replace the code in the <code class="language-text">return</code> statement of the <code class="language-text">App</code> function with this:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"> <span class="token keyword">return</span> <span class="token punctuation">(</span>
    	<span class="token operator">&lt;</span>Grommet theme<span class="token operator">=</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span><span class="token operator">></span>
        	 <span class="token operator">&lt;</span>AppBar<span class="token operator">></span>Subspace DeFi Dashboard Demo<span class="token operator">&lt;</span><span class="token operator">/</span>AppBar<span class="token operator">></span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>Grommet<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Add this component:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">AppBar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Box tag<span class="token operator">=</span><span class="token string">'header'</span> direction<span class="token operator">=</span><span class="token string">'row'</span> align<span class="token operator">=</span><span class="token string">'center'</span> alignContent<span class="token operator">=</span><span class="token string">"center"</span>  background<span class="token operator">=</span><span class="token string">'brand'</span>
        pad<span class="token operator">=</span><span class="token punctuation">{</span>
            <span class="token punctuation">{</span>
                left<span class="token operator">:</span> <span class="token string">'medium'</span><span class="token punctuation">,</span>
                right<span class="token operator">:</span> <span class="token string">'small'</span><span class="token punctuation">,</span>
                vertical<span class="token operator">:</span> <span class="token string">'small'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        elevation<span class="token operator">=</span><span class="token string">'medium'</span>
        style<span class="token operator">=</span><span class="token punctuation">{</span>
            <span class="token punctuation">{</span>zIndex<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Now we've got the skeleton of an app.  Let's wire it up to Ethereum.</p>
<h2>Setting up the plumbing</h2>
<p>First, we need a web3 provider.  For simplicity's sake, we're going to take advantage of the openly accessible Ethereum gateway provided by the fine folks over at <a href="https://developers.cloudflare.com/distributed-web/ethereum-gateway/">Cloudflare</a>.
<code class="language-text">const web3 = new Web3(&#39;https://cloudflare-eth.com&#39;);</code></p>
<p>Next, we need a smart contract to interact with.  The ABI for the Uniswap Exchange contract.  You can get it <a href="https://raw.githubusercontent.com/acolytec3/subspace-demo/master/src/contract/exchange_abi.json">here</a>.  I put it in a subdirectory called <code class="language-text">contract</code> but do what you will.  Then, just import it like any other dependency.
<code class="language-text">import exchangeABI from &#39;./contract/exchange_abi.json&#39;</code></p>
<p>Finally, let's set up Subspace and the smart contract we're going to be working with:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">const</span> subspace <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subspace</span><span class="token punctuation">(</span>web3<span class="token punctuation">.</span>currentProvider<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> dai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span>Contract</span><span class="token punctuation">(</span>exchangeABI<span class="token punctuation">,</span> <span class="token string">'0x2a1530C4C41db0B0b2bB646CB5Eb1A67b7158667'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> daiContract <span class="token operator">=</span> subspace<span class="token punctuation">.</span><span class="token function">contract</span><span class="token punctuation">(</span>dai<span class="token punctuation">)</span><span class="token punctuation">;</span>
subspace<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<p> Now, we're reading to start doing something interesting.</p>
<h2>Getting the data</h2>
<p>While there are any number of ways to do this, we're going to use React Hooks to manage our Subspace observables that pipe date to the front end.</p>
<p>The basic premise of this Dapp is that we're going to show the exchange rate on most recent 5 DAI to ETH trades and then compute an average. I'm going to set up 2 Subspace observables, one to stream the trades from the Uniswap exchange contract and then another to package that up into an array of the last 5 trades to put in a widget in the Dapp.</p>
<h3>Setting up the observables</h3>
<p>We're going to use State and Effect Hooks to manage the observables and the data they return.  As a reminder, <a href="https://reactjs.org/docs/hooks-state.html">State hooks</a> are a React concept for managing state in functional components.  Here's the declaration of the State Hooks.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript">    <span class="token keyword">const</span> <span class="token punctuation">[</span>txnObserver<span class="token punctuation">,</span> setObservable<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>last5Observer<span class="token punctuation">,</span> setLast5Observer<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>latestBlock<span class="token punctuation">,</span> setBlock<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>last5<span class="token punctuation">,</span> setLast5<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<p>Next, we're going to set up three <a href="https://reactjs.org/docs/hooks-effect.html">Effect Hooks</a> to define and then manage the subscriptions for the Subspace observables.  A full explanation of how Effect Hooks work is beyond the scope of this article but the basic point to remember here is that these hooks are intended to be side effects of the rendering process in the <code class="language-text">App</code> component and each effect should be isolated from the others or you will get odd behavior.</p>
<h3>Observable declaration</h3>
<p>The below hook defines our 2 observables.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript">    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span><span class="token function">getBlockNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">block</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setBlock</span><span class="token punctuation">(</span>block<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>latestBlock<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">"number"</span><span class="token punctuation">)</span> 
            <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> EthPurchased$ <span class="token operator">=</span> daiContract<span class="token punctuation">.</span>events<span class="token punctuation">.</span>EthPurchase<span class="token punctuation">.</span><span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            fromBlock<span class="token operator">:</span> latestBlock <span class="token operator">-</span> <span class="token number">50</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> last5$ <span class="token operator">=</span> EthPurchased$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">$latest</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setObservable</span><span class="token punctuation">(</span>EthPurchased$<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setLast5Observer</span><span class="token punctuation">(</span>last5$<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>setObservable<span class="token punctuation">,</span> setLast5Observer<span class="token punctuation">,</span> latestBlock<span class="token punctuation">]</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><code class="language-text">EthPuruchase$</code> is using the Subspace <a href="https://subspace.embarklabs.io/api.html#contract-methods">trackEvent</a> method to stream the <code class="language-text">EthPurchase</code> event from the Uniswap exchange contract.  </p>
<p>Important note: When using the <code class="language-text">trackEvent</code> method, make sure to specify the <code class="language-text">fromBlock</code> parameter as I've done in the above code block.  If you don't, it will begin at the very first block where the contract was deployed and stream every event from then on.  In the example here, that could be tens of thousands of events.  The first time I did this, the app basically got stuck endlessly streaming old <code class="language-text">EthPurchase</code> events going back to the beginning of Uniswap.</p>
<p><code class="language-text">last5$</code> creates a new observable that returns the last 5 trades streamed from <code class="language-text">EthPurchase$</code> using the <a href="https://github.com/embarklabs/subspace/blob/353fee7d23f12ffa3a8f91fe095500335016586e/packages/core/src/operators.js#L84"><code class="language-text">latest</code> operator</a> that is exposed by Subspace.</p>
<h3>Setting up subscriptions</h3>
<p>Now, let's fire up the subscriptions.</p>
<p>First, let's start streaming <code class="language-text">EthPurchase</code> events.  This is a very simple example and just starts up the subscription and prints each transaction to the developer console.  An important thing to remember is to pass the observable's <code class="language-text">unsubscribe</code> function in the return value of the effect.  This is an important feature of Effect hooks.  The hook runs at each component re-render or whenever an element in the dependency array changes and so its important to clean up the subscription before the re-render to avoid memory leaks.  React will call the function specified in the return before re-running the hook during re-render.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript">    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>txnObserver <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> latestBlock <span class="token operator">!=</span> <span class="token string">"number"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            txnObserver<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">trade</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>trade<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> txnObserver<span class="token punctuation">.</span>unsubscribe<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>txnObserver<span class="token punctuation">,</span> latestBlock<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Next, the magic.  Our <code class="language-text">last5Observer</code> observable is the one that produces the data we actually use in the dapp's UI.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript">    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>last5Observer <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            last5Observer<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fiveTrades</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> prices <span class="token operator">=</span> fiveTrades<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">trade</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> txnDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TradeDetails</span><span class="token punctuation">(</span>trade<span class="token punctuation">.</span>tokens_sold<span class="token punctuation">,</span> trade<span class="token punctuation">.</span>eth_bought<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'block'</span><span class="token operator">:</span> trade<span class="token punctuation">.</span>blockNumber<span class="token punctuation">,</span> <span class="token string">'rate'</span><span class="token operator">:</span> txnDetails<span class="token punctuation">.</span>exchangeRate<span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">setLast5</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> last5Observer<span class="token punctuation">.</span>unsubscribe<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>last5Observer<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The magic here is that under the hood,  Subspace stores all the events that are streamed from <code class="language-text">EthPurchase$</code> in a local database and then <code class="language-text">last5Observer</code> uses the <code class="language-text">latest</code> operator to grab the "latest" 5 events and store them in the <code class="language-text">last5</code> state variable maintained by the <code class="language-text">App</code> component's state hook we set up earlier.  Inside the subscribe function, we're transforming the data in the <code class="language-text">EthPurchase</code> events to provide the block number of each transaction and its exchange rate.  Any experts reading this will know that you can use RxJS operators like <code class="language-text">pipe</code> and <code class="language-text">map</code> to transform this data within the initial observable declaration but the above approachs makes it clear what we're doing. </p>
<h3>Displaying the data</h3>
<p>Now, let's do something with this data.  Since this is just a demo, we have only 2 visualizations of the data sourced from Subspace but this should give you an idea how powerful Subspace is.</p>
<p>First, let's use the data from the <code class="language-text">last5Observer</code>.  </p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">Tradelist</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Box direction<span class="token operator">=</span><span class="token string">'column'</span> align<span class="token operator">=</span><span class="token string">'center'</span> pad<span class="token operator">=</span><span class="token string">"medium"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>DataTable columns<span class="token operator">=</span><span class="token punctuation">{</span>
                <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        property<span class="token operator">:</span> <span class="token string">'block'</span><span class="token punctuation">,</span>
                        header<span class="token operator">:</span> <span class="token operator">&lt;</span>Text<span class="token operator">></span>Block<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">></span><span class="token punctuation">,</span>
                        primary<span class="token operator">:</span> <span class="token boolean">true</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        property<span class="token operator">:</span> <span class="token string">'rate'</span><span class="token punctuation">,</span>
                        header<span class="token operator">:</span> <span class="token operator">&lt;</span>Text<span class="token operator">></span><span class="token constant">ETH</span><span class="token operator">/</span><span class="token constant">DAI</span><span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">></span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
            data<span class="token operator">=</span><span class="token punctuation">{</span>
                props<span class="token punctuation">.</span>last5
            <span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Box<span class="token operator">></span>
<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The <code class="language-text">TradeList</code> component makes use of the <a href="https://v2.grommet.io/datatable"><code class="language-text">DataTable</code></a> component from Grommet to show the block number and exchange rate for the 5 last trades from Uniswap.  This table updates dynamically as new <code class="language-text">EthPurchase</code> events are detected by Subspace.  Each time an event is detected, it gets piped from <code class="language-text">txnObserver</code> to <code class="language-text">last5Observer</code> and then updated in the <code class="language-text">last5</code> State hook which causes React to then re-render the page with the latest trades.  Neat!</p>
<p>Next, let's show the average exchange rate of those trades.  This is just plain old React JSX and Javascript at this point but here's the code to display the average rate.  Note, the <code class="language-text">Text</code> element is another Grommet component.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript">    <span class="token operator">&lt;</span>Text margin<span class="token operator">=</span><span class="token string">"medium"</span> textAlign<span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">></span>Average Exchange Rate on <span class="token number">5</span> latest Uniswap <span class="token constant">DAI</span><span class="token operator">-</span><span class="token operator">></span><span class="token constant">ETH</span> trades <span class="token operator">=</span> <span class="token punctuation">{</span>
         <span class="token punctuation">(</span>last5<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">+</span> b<span class="token punctuation">.</span>rate<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">/</span> last5<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<h2>Wrapping up</h2>
<p>And that's it.  In this walkthrough, we've piped in some Ethereum smart contract data, done some transforomations, and then pushed it to a front-end, all using Subspace for the backend and the most cutting edge version of React for the front-end.  Not bad for a few minutes coding.</p>
<p>Hit up <a href="https://acolytec3.github.io/subspace-demo">https://acolytec3.github.io/subspace-demo</a> to see the whole thing in action.</p></div></div></main><style data-emotion-css="1l4w6pd">.css-1l4w6pd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}</style><footer class="css-1l4w6pd e1qde77f2"><p>© <!-- -->2021<!-- -->, Built with<!-- --> </p><style data-emotion-css="o5uqvq">.css-o5uqvq{margin-left:5px;}</style><a href="https://www.gatsbyjs.org" class="css-o5uqvq e1qde77f1">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/observing_defi";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-78cdc6a84a6e659c51c0.js"],"app":["/app-52efec0485f1743b94f6.js"],"component---src-pages-404-js":["/component---src-pages-404-js-e1a3b6269224fee82fcc.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-68259013cd4e6e897048.js"],"component---src-pages-index-js":["/component---src-pages-index-js-6d557989ba27c82fcf15.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-7797dd6cba906a010d90.js"]};/*]]>*/</script><script src="/polyfill-78cdc6a84a6e659c51c0.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-7797dd6cba906a010d90.js" async=""></script><script src="/commons-4f8d84475a4b9ccab8ef.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-52efec0485f1743b94f6.js" async=""></script><script src="/framework-8e528b732ab2eaadb7b7.js" async=""></script><script src="/webpack-runtime-512b8481d810a449f5df.js" async=""></script></body></html>